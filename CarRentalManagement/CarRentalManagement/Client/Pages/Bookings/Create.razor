@attribute [Route("/" + PagePath.Bookings + "/create")]
@inject HttpClient _client
@inject NavigationManager _navManager

<FormComponent Booking="Booking" ButtonText="Create Booking" Title="Create New Booking" Vehicles="Vehicles" Customers="Customers" OnValidSubmit="CreateBookings" />

@code {
    Booking Booking = new Booking()
    {
        DateOut = DateTime.Now.Date,
        DateIn = DateTime.Now.Date
    };
    private List<Vehicle> Vehicles;
    private List<Customer> Customers;

    protected async override Task OnInitializedAsync()
    {
        Vehicles = await _client.GetFromJsonAsync<List<Vehicle>>($"{ApiEndpoints.Vehicles}");
        Customers = await _client.GetFromJsonAsync<List<Customer>>(ApiEndpoints.Customers);
    }

    private async Task CreateBookings()
    {
        await _client.PostAsJsonAsync(ApiEndpoints.Bookings, Booking);
        _navManager.NavigateTo(PagePath.Bookings);
    }

}
